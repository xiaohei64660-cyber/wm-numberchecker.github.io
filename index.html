<script>
  window.onload = () => {
    document.getElementById('numberInput').focus();
  };

  async function checkNumber() {
    const input = document.getElementById('numberInput').value.trim();
    const resultBox = document.getElementById('result');
    const numberOutput = document.getElementById('numberOutput');
    const chatterOutput = document.getElementById('chatterOutput');
    const loading = document.getElementById('loading');

    if (!input) {
      alert("Please enter a number or username.");
      return;
    }

    resultBox.style.display = 'none';
    loading.style.display = 'block';

    // Determine if input is a number or username
    const isNumber = /^\d+$/.test(input);
    const queryField = isNumber ? 'number' : 'username';
    const apiUrl = `https://sheetdb.io/api/v1/y55n7d2a0fqro/search?${queryField}=${input}`;

    try {
      const res = await fetch(apiUrl);
      const data = await res.json();

      if (data.length > 0) {
        numberOutput.textContent = isNumber ? data[0].number : data[0].username;
        chatterOutput.textContent = data[0].chatter;
      } else {
        numberOutput.textContent = input;
        chatterOutput.textContent = "No chatter found.";
      }

      resultBox.style.display = 'block';
    } catch (error) {
      alert("Something went wrong. Please try again later.");
      console.error(error);
    } finally {
      loading.style.display = 'none';
    }
  }
</script>
